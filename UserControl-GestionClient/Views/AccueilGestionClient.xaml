<UserControl x:Class="UserControl_GestionClient.Views.AccueilGestionClient"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:viewModels="clr-namespace:UserControl_GestionClient.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1000">
    <UserControl.Resources>
        <viewModels:AccueilGestionClientViewModel x:Key="Windows1ViewModel" />
    </UserControl.Resources>

    <Grid DataContext="{StaticResource Windows1ViewModel}">
        <Grid.RowDefinitions>
            <RowDefinition Height="0.01*"/>
            <RowDefinition Height="0.3*"/>
        </Grid.RowDefinitions>
        <Button Content="Ajouter un client"
        		Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top" Click="CreateCustomer" Margin="10,6,0,0"/>
        <Button Content="Ajouter un contact"
        		Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" Click="CreateContact" Margin="0,5,10,0"/>

        <DataGrid ItemsSource="{Binding CompanyCollection}"
                  Name="dataGrid1"
            	AutoGenerateColumns="False"
            	CanUserAddRows="False"  Grid.Row="1">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding name}"
                        IsReadOnly="True"
            			Header="Nom" />
                <DataGridTextColumn Binding="{Binding address}"
            			IsReadOnly="True"
            			Header="Adresse" />
                <DataGridTextColumn Binding="{Binding postalcode}"
                        IsReadOnly="True"
            			Header="Code Postal" />
                <DataGridTextColumn Binding="{Binding city}"
            			IsReadOnly="True"
            			Header="Ville" />
                <DataGridTextColumn Binding="{Binding siret}"
            			IsReadOnly="True"
            			Header="Siret" />
                <DataGridTemplateColumn Header="Details">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Details"
                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}, Path=DataContext.DetailCustomer}" 
                                    CommandParameter="{Binding ElementName=dataGrid1, Path=SelectedItem}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Delete">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Delete"
                                    Click="CompanyDelete"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>    
</UserControl>